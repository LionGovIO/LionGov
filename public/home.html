<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>LionGov</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!--
    <script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
    -->

    <!-- Boostrap stuff, has to come before JQuery is imported -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>




    <style type="text/css">

    </style>

    <script>
        /*
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/submitvote', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
            voteClass: 'matrix',
            voteValue: 'red'
        }));
        */

        function submitVote(voteClass, voteValue) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", '/submitvote', true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onreadystatechange = function () {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    console.log('response: ' + xhr.responseText);

                    if (xhr.status == 200) {
                        // TODO: go to a vote successful page, helps a bit to prevent people to vote multiple times
                        // TODO: when doing vote calculation, need to get rid of other votes from the same person, only pick 1 (probably the latest one)
                        alert('Vote submitted successfully')
                    } else {
                        alert('Vote submission failed, please try again')
                    }
                }
            }

            xhr.send(JSON.stringify({
                voteClass: voteClass,
                voteValue: voteValue
            }));
        }

        $(document).ready(function () {
            $("#voteButton").click(function () {
                var radioValue = $("input[name='voteOptions']:checked").val();
                if (radioValue) {
                    // alert("Your are a - " + radioValue);

                    submitVote('matrix', radioValue);
                }
            });
        });
    </script>

</head>

<body>

    <!-- Begin page content -->
    <main class="flex-shrink-0">
        <div class="container">
            <h1 class="mt-5">LionGov</h1>

            <p class="lead">
                This is your last chance. After this, there is no turning back. You take the blue pill—the story ends,
                you wake up in your bed and believe whatever you want to believe. You take the red pill—you stay in
                Wonderland, and I show you how deep the rabbit hole goes. Remember: all I'm offering is the truth.
                Nothing more.
            </p>
            <p>
            <p>
                Choose your option:
            </p>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="voteOptions" id="flexRadioDefault1" value="blue">
                <label class="form-check-label" for="flexRadioDefault1">
                    <span style="color: blue;">Blue pill</span>
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="voteOptions" id="flexRadioDefault2" value="red">
                <label class="form-check-label" for="flexRadioDefault2">
                    <span style="color: red;">Red pill</span>
                </label>
            </div>
            </p>
            <p>
                <button type="button" id="voteButton" class="btn btn-primary">Vote</button>
            </p>
        </div>
    </main>

</body>

</html>